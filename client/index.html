<!DOCTYPE html>
<html>
  <head>
    <title>Faunadex: Gotta encounter em all!</title>
    <script src="https://code.jquery.com/jquery-2.2.3.js" integrity="sha256-laXWtGydpwqJ8JA+X9x2miwmaiKhn8tVmOVEigRNtP4=" crossorigin="anonymous"></script>
    <script src="/lib/jquery.ajax-retry.min.js"></script>
    <link rel="stylesheet" type="text/css" href="/lib/style.css">
  </head>
  <body>
    <div id="app"></div>
    <script src="bundle.js"></script>
    <script type="text/javascript">
      var arkiveApiKey = '4tqY8uUz1mcB5vu0W80z_RK8jgr2dfghJWjOOVtEWUU1',
      arkiveApiSpeciesName = 'panthera%20tigris', // note spaces replaced by %20
      arkiveApiSpeciesId = undefined, 
          // optional, but recommended

      arkiveApiWidth = 320,
      arkiveApiHeight = 355,
      arkiveApiImages = false, // whether to include thumbnails
      arkiveApiText = false; // whether to include species facts / description
      function arkiveEmbedCallback(data) {
        var iframeCreation = '<iframe id="frame" name="widget" src ="#" width="100%" height="1" marginheight="0" marginwidth="0" frameborder="no"></iframe>';
        var iframe = window.location.protocol + "//" + (data.results[0].url);
        if (data.error != 'null') {
              document.getElementById("arkiveIframe").innerHTML = iframeCreation;
            var iframeAttr = parent.document.getElementById("frame");
            iframeAttr.height = arkiveApiHeight;
            iframeAttr.width = arkiveApiWidth + 22;
            iframeAttr.src = iframe;
          }
      }
      (function () {
          function async_load() {
              var s = document.createElement('script'); 
              s.type = 'text/javascript';
              s.async = true;
              s.src = 'https://api.arkive.org/v2/embedScript/species/scientificName/' + arkiveApiSpeciesName 
              + '?key=' + arkiveApiKey + (arkiveApiSpeciesId ? '&id=' + arkiveApiSpeciesId : '') + '&mtype=all&w=' 
              + arkiveApiWidth + '&h=' + arkiveApiHeight + '&tn=' + (arkiveApiImages ? 1 : 0) + '&text=' 
              + (arkiveApiText ? 1 : 0) + '&callback=arkiveEmbedCallback';
              var x = document.getElementsByTagName('script')[0];
              x.parentNode.insertBefore(s, x);
          }
          if (window.attachEvent)
              window.attachEvent('onload', async_load);
          else
              window.addEventListener('load', async_load, false);
      })();
    </script> 
    <div id="arkiveIframe"></div>
  </body>
</html>
